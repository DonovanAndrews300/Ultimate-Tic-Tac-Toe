(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),r=a(7),i=a.n(r),c=(a(19),a.p,a(3)),o=a(4),l=a(10),u=a(6),h=a(5),d=a(0),m=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.call(this)}return Object(o.a)(a,[{key:"changePlayerSquare",value:function(){var e=this.props.gameState.game[this.props.cellIndex],t=this.props.gameState.currentPlayer;""===e&&("X"===t&&this.props.updateGameState(this.props.cellIndex,"O"),null!==t&&"O"!==t||this.props.updateGameState(this.props.cellIndex,"X")),""!=e&&this.props.updateGameState(this.props.cellIndex,"")}},{key:"disableButton",value:function(){return!this.props.gameState.gameActive}},{key:"render",value:function(){var e=this,t=this.disableButton();return Object(d.jsx)("button",{ref:this.cellContent,disabled:t,onClick:function(){return e.changePlayerSquare()},className:"square",children:this.props.gameState.game[this.props.cellIndex]})}}]),a}(s.a.Component),j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(c.a)(this,a),t.call(this)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({game:this.props.updateGameState})}},{key:"renderSquare",value:function(e){return Object(d.jsx)(m,{cellIndex:e,gameState:this.props.gameState,updateGameState:this.props.updateGameState})}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"board",children:[Object(d.jsx)("div",{className:"status",children:"Tic-Tac-Toe Ultimate Showdown!"}),Object(d.jsx)("div",{className:"board-row",children:[0,1,2].map((function(t){return e.renderSquare(t)}))}),Object(d.jsx)("div",{className:"board-row",children:[3,4,5].map((function(t){return e.renderSquare(t)}))}),Object(d.jsx)("div",{className:"board-row",children:[6,7,8].map((function(t){return e.renderSquare(t)}))})]})}}]),a}(s.a.Component),p=a(14),b=a.n(p),O=a(12),v=a(13),g=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={themeOn:!0,game:["","","","","","","","",""],currentPlayer:null,gameActive:!0},e.handleGameStateUpdate=e.handleGameStateUpdate.bind(Object(l.a)(e)),e.socket=new WebSocket("ws://localhost:4000"),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.initWebSocket()}},{key:"initWebSocket",value:function(){var e=this;this.socket.addEventListener("open",(function(){console.log("connected to websockt server"),e.socket.addEventListener("message",(function(t){var a=JSON.parse(t.data);if(a!=e.state){var n=a.game,s=a.currentPlayer,r=a.gameActive;console.log("incoming message is ",n,s,r),e.setState({game:n,gameActive:r})}}))}))}},{key:"handleGameStateUpdate",value:function(e,t){""===t?("X"===this.state.currentPlayer&&this.setState({currentPlayer:"O"}),"O"===this.state.currentPlayer&&this.setState({currentPlayer:"X"})):this.setState({currentPlayer:t}),this.state.game[e]=t,this.handleResult()}},{key:"showResults",value:function(){if(!this.state.gameActive)return this.state.game.includes("")?"O"===this.state.currentPlayer?"Winner is O":"Winner is X":"Its a draw!"}},{key:"handleResult",value:function(){var e=this,t=!1,a=!this.state.game.includes("");[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].forEach((function(a){var n=e.state.game[a[0]],s=e.state.game[a[1]],r=e.state.game[a[2]];n===s&&s===r&&(""===n&&""===s&&""===r||(t=!0))})),t||a?this.setState({gameActive:!1},(function(){return e.socket.send(JSON.stringify(e.state))})):this.socket.send(JSON.stringify(this.state))}},{key:"handleRestartGame",value:function(){this.setState({game:["","","","","","","","",""],currentPlayer:null,gameActive:!0})}},{key:"handleGameTheme",value:function(){return!0===this.state.themeOn?void this.setState({themeOn:!1}):void this.setState({themeOn:!0})}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"game",children:[Object(d.jsx)("div",{className:"game-board",children:Object(d.jsx)(j,{gameState:this.state,updateGameState:this.handleGameStateUpdate})}),Object(d.jsxs)("div",{className:"game-info",children:[Object(d.jsx)(b.a,{src:["themesong.mp3"],playing:this.state.themeOn,loop:!0}),Object(d.jsx)("div",{children:this.showResults()}),Object(d.jsx)("ol",{children:Object(d.jsx)("button",{onClick:function(){return e.handleRestartGame()},children:"Restart"})}),this.state.themeOn?Object(d.jsx)("ol",{children:Object(d.jsx)("button",{onClick:function(){return e.handleGameTheme()},children:Object(d.jsx)(O.a,{icon:v.b})})}):Object(d.jsx)("ol",{children:Object(d.jsx)("button",{onClick:function(){return e.handleGameTheme()},children:Object(d.jsx)(O.a,{icon:v.a})})})]})]})}}]),a}(s.a.Component);var f=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(g,{})})};i.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.5f1a607d.chunk.js.map